<a routerLink="/" class="btn btn-secondary back-btn">‚Üê Back to Home</a>

<div class="container py-5">
  <div class="text-center mb-5">
    <h1 class="display-5 fw-bold text-primary">üåê Network Debugging Demo</h1>
    <p class="lead text-muted">Learn to debug HTTP requests and API calls using the Network tab</p>
  </div>

  <div class="row">
    <div class="col-lg-8 mx-auto">
      
      <!-- API Requests Demo -->
      <div class="demo-section">
        <h3 class="h4 mb-3">1. GET Request - Fetch Posts</h3>
        <p class="text-muted mb-3">Make a GET request to JSONPlaceholder API and inspect in Network tab</p>
        <button class="btn btn-primary me-2" (click)="fetchPosts()" [disabled]="isLoading">
          {{ isLoading ? 'Loading...' : 'Fetch Posts' }}
        </button>
        <button class="btn btn-outline-primary" (click)="fetchSinglePost()" [disabled]="isLoading">
          Fetch Single Post
        </button>
      </div>

      <!-- POST Request Demo -->
      <div class="demo-section">
        <h3 class="h4 mb-3">2. POST Request - Create Data</h3>
        <p class="text-muted mb-3">Send a POST request and examine the request payload in Network tab</p>
        <button class="btn btn-success" (click)="createPost()" [disabled]="isLoading">
          {{ isLoading ? 'Creating...' : 'Create New Post' }}
        </button>
      </div>

      <!-- Error Demo -->
      <div class="demo-section">
        <h3 class="h4 mb-3">3. Network Error Debugging</h3>
        <p class="text-muted mb-3">Trigger a 404 error and see how it appears in the Network tab</p>
        <button class="btn btn-warning" (click)="fetchWithError()" [disabled]="isLoading">
          {{ isLoading ? 'Loading...' : 'Trigger 404 Error' }}
        </button>
      </div>

      <!-- Loading State -->
      <div class="demo-section" *ngIf="isLoading">
        <div class="text-center">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p class="mt-2 text-muted">Check the Network tab now!</p>
        </div>
      </div>

      <!-- Error Display -->
      <div class="alert alert-danger" *ngIf="error">
        <h6 class="alert-heading">Network Error:</h6>
        <p class="mb-0">{{ error }}</p>
      </div>

      <!-- Results Display -->
      <div class="demo-section" *ngIf="apiResults.length > 0">
        <h3 class="h4 mb-3">API Response Data</h3>
        <div class="demo-output">
          <div *ngFor="let post of apiResults" class="mb-3 p-3 border rounded">
            <h6><strong>Post ID:</strong> {{ post.id || 'N/A' }}</h6>
            <p><strong>Title:</strong> {{ post.title }}</p>
            <p class="mb-0"><strong>Body:</strong> {{ post.body }}</p>
          </div>
        </div>
        <button class="btn btn-outline-secondary btn-sm mt-2" (click)="clearResults()">Clear Results</button>
      </div>

      <!-- Instructions -->
      <div class="alert alert-info">
        <h5 class="alert-heading">üåê How to Debug Network Requests:</h5>
        <ol class="mb-3">
          <li>Open Developer Tools (F12) ‚Üí <strong>Network</strong> tab</li>
          <li>Make sure recording is enabled (red circle should be filled)</li>
          <li>Click any button above to make API requests</li>
          <li>Watch requests appear in the Network tab in real-time</li>
          <li>Click on any request to see detailed information:</li>
          <ul class="mt-2">
            <li><strong>Headers:</strong> Request/response headers</li>
            <li><strong>Preview:</strong> Formatted response data</li>
            <li><strong>Response:</strong> Raw response data</li>
            <li><strong>Timing:</strong> Request timing breakdown</li>
          </ul>
        </ol>
        
        <div class="alert alert-success">
          <strong>üîç What to Look For:</strong>
          <ul class="mb-0">
            <li><strong>Status codes:</strong> 200 (success), 404 (not found), 500 (server error)</li>
            <li><strong>Request method:</strong> GET, POST, PUT, DELETE</li>
            <li><strong>Response time:</strong> How long the request took</li>
            <li><strong>Payload size:</strong> Request and response sizes</li>
            <li><strong>Headers:</strong> Authentication, content-type, etc.</li>
          </ul>
        </div>
      </div>

    </div>
  </div>
</div>
